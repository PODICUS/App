<!DOCTYPE html>
<html>
 <head>
    <meta charset="utf-8" />
    <title>WebCLGL 2.0</title> 
   
    <script src="http://rawgithub.com/3DRoberto/webclgl/master/WebCLGLUtils.class.js"></script>
    <script src="http://rawgithub.com/3DRoberto/webclgl/master/WebCLGLBuffer.class.js"></script>
    <script src="http://rawgithub.com/3DRoberto/webclgl/master/WebCLGLKernel.class.js"></script>
   	<script src="http://rawgithub.com/3DRoberto/webclgl/master/WebCLGL.class.js"></script>
  </head>
  <body> 

    pi => <div id="DIVC_GPU"></div>
    
	<script>
    webCLGL = new WebCLGL();
    var offset = 4; // 0 = to handle values from 0.0 to 1.0
    var _length = 1;
    var buffer_A = webCLGL.createBuffer(_length, "FLOAT", offset);
    
    var kernel_add_source = 
    'void main(int a) {'+
    'float pi = 0.0;' +
    'for(int i = 1; i < 100000; i += 4) {' +
    'pi += (4.0 / float(i)) - (4.0 / (float(i) + 2.0));' +
	'}' +
    'out_float = pi;'+
    '}';

    var kernel_add = webCLGL.createKernel(kernel_add_source);
    // kernel_add.setKernelArg(0, 500);
    kernel_add.compile();
    
    webCLGL.enqueueNDRangeKernel(kernel_add, buffer_A); 
    
    var C_GPU = webCLGL.enqueueReadBuffer_Float(buffer_A);
    document.getElementById('DIVC_GPU').innerText = C_GPU;
	</script>
  </body>
</html>